<!DOCTYPE html>
<html lang="en" data-accent-color="bronze" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Analytics - litestar-flags</title><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="User Guide" href="../user-guide/index.html" /><link rel="prev" title="Exceptions" href="exceptions.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=e1a1ceaf" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=a318c5d4" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=18eed9c1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Analytics"/>
    <meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      
      
      <strong>litestar-flags</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link">
          <a href="https://litestar.dev/">
            <span>Litestar</span></a>
        </li><li class="link">
          <a href="https://pypi.org/project/litestar-flags/">
            <span>PyPI</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials">
  <a href="https://github.com/JacobCoffee/litestar-flags" aria-label="GitHub">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2"></span>
          <span class="hamburger_3"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/configuration.html">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">How-To Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/storage-backends.html">Storage Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/percentage-rollouts.html">Percentage Rollouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/user-targeting.html">User Targeting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/ab-testing.html">A/B Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/environments.html">Multi-Environment Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/testing.html">Testing with Feature Flags</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html">Storage Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorators.html">Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types and Enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Analytics</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/segments.html">Segment-based Targeting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/openfeature.html">OpenFeature Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/time-based-rules.html">Time-based Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/multi-environment.html">Multi-Environment Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/analytics.html">Flag Analytics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/admin-api.html">Admin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/workflows.html">Approval Workflows</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/JacobCoffee/litestar-flags">GitHub</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#core-api">Core API</a><ul>
<li><a class="reference internal" href="#flagevaluationevent">FlagEvaluationEvent</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent"><code class="docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.timestamp"><code class="docutils literal notranslate">timestamp</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.flag_key"><code class="docutils literal notranslate">flag_key</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.value"><code class="docutils literal notranslate">value</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.reason"><code class="docutils literal notranslate">reason</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.variant"><code class="docutils literal notranslate">variant</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.targeting_key"><code class="docutils literal notranslate">targeting_key</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.context_attributes"><code class="docutils literal notranslate">context_attributes</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.evaluation_duration_ms"><code class="docutils literal notranslate">evaluation_duration_ms</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate">timestamp</span></code></a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate">flag_key</span></code></a></li>
<li><a class="reference internal" href="#id2"><code class="docutils literal notranslate">value</span></code></a></li>
<li><a class="reference internal" href="#id3"><code class="docutils literal notranslate">reason</span></code></a></li>
<li><a class="reference internal" href="#id4"><code class="docutils literal notranslate">variant</span></code></a></li>
<li><a class="reference internal" href="#id5"><code class="docutils literal notranslate">targeting_key</span></code></a></li>
<li><a class="reference internal" href="#id6"><code class="docutils literal notranslate">context_attributes</span></code></a></li>
<li><a class="reference internal" href="#id7"><code class="docutils literal notranslate">evaluation_duration_ms</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent.to_dict"><code class="docutils literal notranslate">to_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#flagmetrics">FlagMetrics</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics"><code class="docutils literal notranslate"><span class="pre">FlagMetrics</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.evaluation_rate"><code class="docutils literal notranslate">evaluation_rate</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.unique_users"><code class="docutils literal notranslate">unique_users</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.variant_distribution"><code class="docutils literal notranslate">variant_distribution</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.reason_distribution"><code class="docutils literal notranslate">reason_distribution</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.error_rate"><code class="docutils literal notranslate">error_rate</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.latency_p50"><code class="docutils literal notranslate">latency_p50</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.latency_p90"><code class="docutils literal notranslate">latency_p90</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.latency_p99"><code class="docutils literal notranslate">latency_p99</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.total_evaluations"><code class="docutils literal notranslate">total_evaluations</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.window_start"><code class="docutils literal notranslate">window_start</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.window_end"><code class="docutils literal notranslate">window_end</span></code></a></li>
<li><a class="reference internal" href="#id8"><code class="docutils literal notranslate">evaluation_rate</span></code></a></li>
<li><a class="reference internal" href="#id9"><code class="docutils literal notranslate">unique_users</span></code></a></li>
<li><a class="reference internal" href="#id10"><code class="docutils literal notranslate">variant_distribution</span></code></a></li>
<li><a class="reference internal" href="#id11"><code class="docutils literal notranslate">reason_distribution</span></code></a></li>
<li><a class="reference internal" href="#id12"><code class="docutils literal notranslate">error_rate</span></code></a></li>
<li><a class="reference internal" href="#id13"><code class="docutils literal notranslate">latency_p50</span></code></a></li>
<li><a class="reference internal" href="#id14"><code class="docutils literal notranslate">latency_p90</span></code></a></li>
<li><a class="reference internal" href="#id15"><code class="docutils literal notranslate">latency_p99</span></code></a></li>
<li><a class="reference internal" href="#id16"><code class="docutils literal notranslate">total_evaluations</span></code></a></li>
<li><a class="reference internal" href="#id17"><code class="docutils literal notranslate">window_start</span></code></a></li>
<li><a class="reference internal" href="#id18"><code class="docutils literal notranslate">window_end</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.to_dict"><code class="docutils literal notranslate">to_dict()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#analyticscollector-protocol">AnalyticsCollector Protocol</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsCollector"><code class="docutils literal notranslate"><span class="pre">AnalyticsCollector</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsCollector.record"><code class="docutils literal notranslate">record()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsCollector.flush"><code class="docutils literal notranslate">flush()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsCollector.close"><code class="docutils literal notranslate">close()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsCollector.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#collectors">Collectors</a><ul>
<li><a class="reference internal" href="#inmemoryanalyticscollector">InMemoryAnalyticsCollector</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector"><code class="docutils literal notranslate"><span class="pre">InMemoryAnalyticsCollector</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.max_size"><code class="docutils literal notranslate">max_size</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#id19"><code class="docutils literal notranslate">max_size</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.record"><code class="docutils literal notranslate">record()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.flush"><code class="docutils literal notranslate">flush()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.close"><code class="docutils literal notranslate">close()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.get_events"><code class="docutils literal notranslate">get_events()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.get_event_count"><code class="docutils literal notranslate">get_event_count()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.clear"><code class="docutils literal notranslate">clear()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#databaseanalyticscollector">DatabaseAnalyticsCollector</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector"><code class="docutils literal notranslate"><span class="pre">DatabaseAnalyticsCollector</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.batch_size"><code class="docutils literal notranslate">batch_size</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush_interval_seconds"><code class="docutils literal notranslate">flush_interval_seconds</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.create"><code class="docutils literal notranslate">create()</span></code></a></li>
<li><a class="reference internal" href="#id20"><code class="docutils literal notranslate">batch_size</span></code></a></li>
<li><a class="reference internal" href="#id21"><code class="docutils literal notranslate">flush_interval_seconds</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.record"><code class="docutils literal notranslate">record()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush"><code class="docutils literal notranslate">flush()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.close"><code class="docutils literal notranslate">close()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.get_buffer_size"><code class="docutils literal notranslate">get_buffer_size()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.health_check"><code class="docutils literal notranslate">health_check()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#aggregator">Aggregator</a><ul>
<li><a class="reference internal" href="#analyticsaggregator">AnalyticsAggregator</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator"><code class="docutils literal notranslate"><span class="pre">AnalyticsAggregator</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.source"><code class="docutils literal notranslate">source</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_evaluation_rate"><code class="docutils literal notranslate">get_evaluation_rate()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_unique_users"><code class="docutils literal notranslate">get_unique_users()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_variant_distribution"><code class="docutils literal notranslate">get_variant_distribution()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_reason_distribution"><code class="docutils literal notranslate">get_reason_distribution()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_error_rate"><code class="docutils literal notranslate">get_error_rate()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_latency_percentiles"><code class="docutils literal notranslate">get_latency_percentiles()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.AnalyticsAggregator.get_flag_metrics"><code class="docutils literal notranslate">get_flag_metrics()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#exporters">Exporters</a><ul>
<li><a class="reference internal" href="#prometheusexporter">PrometheusExporter</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter"><code class="docutils literal notranslate"><span class="pre">PrometheusExporter</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.registry"><code class="docutils literal notranslate">registry</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.prefix"><code class="docutils literal notranslate">prefix</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#id22"><code class="docutils literal notranslate">registry</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.evaluations_counter"><code class="docutils literal notranslate">evaluations_counter</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.duration_histogram"><code class="docutils literal notranslate">duration_histogram</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.unique_users_gauge"><code class="docutils literal notranslate">unique_users_gauge</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.error_rate_gauge"><code class="docutils literal notranslate">error_rate_gauge</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.record"><code class="docutils literal notranslate">record()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.record_batch"><code class="docutils literal notranslate">record_batch()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.flush"><code class="docutils literal notranslate">flush()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.close"><code class="docutils literal notranslate">close()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.update_from_metrics"><code class="docutils literal notranslate">update_from_metrics()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.update_from_aggregator"><code class="docutils literal notranslate">update_from_aggregator()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.get_tracked_flag_keys"><code class="docutils literal notranslate">get_tracked_flag_keys()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.reset_flag_stats"><code class="docutils literal notranslate">reset_flag_stats()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.PrometheusExporter.reset_all_stats"><code class="docutils literal notranslate">reset_all_stats()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#otelanalyticsexporter">OTelAnalyticsExporter</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter"><code class="docutils literal notranslate"><span class="pre">OTelAnalyticsExporter</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.tracer"><code class="docutils literal notranslate">tracer</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.meter"><code class="docutils literal notranslate">meter</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size"><code class="docutils literal notranslate">batch_size</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush_interval"><code class="docutils literal notranslate">flush_interval</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
<li><a class="reference internal" href="#id23"><code class="docutils literal notranslate">tracer</span></code></a></li>
<li><a class="reference internal" href="#id24"><code class="docutils literal notranslate">meter</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.events_recorded_counter"><code class="docutils literal notranslate">events_recorded_counter</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size_histogram"><code class="docutils literal notranslate">batch_size_histogram</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.buffer_size"><code class="docutils literal notranslate">buffer_size</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record"><code class="docutils literal notranslate">record()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush"><code class="docutils literal notranslate">flush()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.close"><code class="docutils literal notranslate">close()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_sync"><code class="docutils literal notranslate">record_sync()</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_batch"><code class="docutils literal notranslate">record_batch()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#helper-functions">Helper Functions</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.create_exporter_from_hook"><code class="docutils literal notranslate"><span class="pre">create_exporter_from_hook()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#database-models">Database Models</a><ul>
<li><a class="reference internal" href="#analyticseventmodel">AnalyticsEventModel</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel"><code class="docutils literal notranslate"><span class="pre">AnalyticsEventModel</span></code></a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.timestamp"><code class="docutils literal notranslate">timestamp</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.flag_key"><code class="docutils literal notranslate">flag_key</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.value"><code class="docutils literal notranslate">value</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.reason"><code class="docutils literal notranslate">reason</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.variant"><code class="docutils literal notranslate">variant</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.targeting_key"><code class="docutils literal notranslate">targeting_key</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.context_attributes"><code class="docutils literal notranslate">context_attributes</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.evaluation_duration_ms"><code class="docutils literal notranslate">evaluation_duration_ms</span></code></a></li>
<li><a class="reference internal" href="#id25"><code class="docutils literal notranslate">timestamp</span></code></a></li>
<li><a class="reference internal" href="#id26"><code class="docutils literal notranslate">flag_key</span></code></a></li>
<li><a class="reference internal" href="#id27"><code class="docutils literal notranslate">reason</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.id"><code class="docutils literal notranslate">id</span></code></a></li>
<li><a class="reference internal" href="#id28"><code class="docutils literal notranslate">value</span></code></a></li>
<li><a class="reference internal" href="#id29"><code class="docutils literal notranslate">variant</span></code></a></li>
<li><a class="reference internal" href="#id30"><code class="docutils literal notranslate">targeting_key</span></code></a></li>
<li><a class="reference internal" href="#id31"><code class="docutils literal notranslate">context_attributes</span></code></a></li>
<li><a class="reference internal" href="#id32"><code class="docutils literal notranslate">evaluation_duration_ms</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.created_at"><code class="docutils literal notranslate">created_at</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.updated_at"><code class="docutils literal notranslate">updated_at</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.models.AnalyticsEventModel.__init__"><code class="docutils literal notranslate">__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#constants">Constants</a><ul>
<li><a class="reference internal" href="#availability-flags">Availability Flags</a><ul>
<li><a class="reference internal" href="#litestar_flags.analytics.PROMETHEUS_AVAILABLE"><code class="docutils literal notranslate">analytics.PROMETHEUS_AVAILABLE</span></code></a></li>
<li><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTEL_AVAILABLE"><code class="docutils literal notranslate">analytics.exporters.otel.OTEL_AVAILABLE</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">litestar-flags</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">API Reference</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Analytics</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="relative min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
  <article class="yue" role="main">
          <section id="analytics">
<h1>Analytics<a class="headerlink" href="#analytics" title="Link to this heading">¶</a></h1>
<p>The analytics module provides comprehensive tracking and analysis of feature flag
evaluations. It includes event models, collectors for storing events, aggregators
for computing metrics, and exporters for monitoring systems.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The analytics system follows a three-layer architecture:</p>
<ol class="arabic simple">
<li><p><strong>Events</strong>: <code class="docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code> captures each flag evaluation</p></li>
<li><p><strong>Collectors</strong>: Store events (in-memory, database, or custom backends)</p></li>
<li><p><strong>Aggregators</strong>: Compute metrics from collected events</p></li>
<li><p><strong>Exporters</strong>: Push metrics to external systems (Prometheus, OpenTelemetry)</p></li>
</ol>
<p>For usage guides and examples, see <a class="reference internal" href="../user-guide/analytics.html"><span class="doc">Flag Analytics</span></a>.</p>
</section>
<section id="core-api">
<h2>Core API<a class="headerlink" href="#core-api" title="Link to this heading">¶</a></h2>
<section id="flagevaluationevent">
<h3>FlagEvaluationEvent<a class="headerlink" href="#flagevaluationevent" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">FlagEvaluationEvent</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/models.html#FlagEvaluationEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Event capturing a single feature flag evaluation.</p>
<p>Records detailed information about each flag evaluation for analytics,
debugging, and monitoring purposes. This model follows the OpenFeature
specification patterns for evaluation telemetry.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.timestamp" title="Link to this definition">¶</a></dt>
<dd><p>When the evaluation occurred (UTC).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.flag_key">
<span class="sig-name descname"><span class="pre">flag_key</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.flag_key" title="Link to this definition">¶</a></dt>
<dd><p>The key of the evaluated flag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.value" title="Link to this definition">¶</a></dt>
<dd><p>The evaluated flag value (any type).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.reason">
<span class="sig-name descname"><span class="pre">reason</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.reason" title="Link to this definition">¶</a></dt>
<dd><p>The reason for the evaluation result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.variant">
<span class="sig-name descname"><span class="pre">variant</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.variant" title="Link to this definition">¶</a></dt>
<dd><p>The variant key if a variant was selected.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.targeting_key">
<span class="sig-name descname"><span class="pre">targeting_key</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.targeting_key" title="Link to this definition">¶</a></dt>
<dd><p>The targeting key used for evaluation (e.g., user ID).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.context_attributes">
<span class="sig-name descname"><span class="pre">context_attributes</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.context_attributes" title="Link to this definition">¶</a></dt>
<dd><p>Additional context attributes used in evaluation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.evaluation_duration_ms">
<span class="sig-name descname"><span class="pre">evaluation_duration_ms</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.evaluation_duration_ms" title="Link to this definition">¶</a></dt>
<dd><p>Time taken to evaluate the flag in milliseconds.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">UTC</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">FlagEvaluationEvent</span><span class="p">(</span>
</span><span data-line="3"><span class="gp">... </span>    <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">),</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="n">flag_key</span><span class="o">=</span><span class="s2">&quot;new_checkout&quot;</span><span class="p">,</span>
</span><span data-line="5"><span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="6"><span class="gp">... </span>    <span class="n">reason</span><span class="o">=</span><span class="n">EvaluationReason</span><span class="o">.</span><span class="n">TARGETING_MATCH</span><span class="p">,</span>
</span><span data-line="7"><span class="gp">... </span>    <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;beta_users&quot;</span><span class="p">,</span>
</span><span data-line="8"><span class="gp">... </span>    <span class="n">targeting_key</span><span class="o">=</span><span class="s2">&quot;user-123&quot;</span><span class="p">,</span>
</span><span data-line="9"><span class="gp">... </span>    <span class="n">context_attributes</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;plan&quot;</span><span class="p">:</span> <span class="s2">&quot;premium&quot;</span><span class="p">},</span>
</span><span data-line="10"><span class="gp">... </span>    <span class="n">evaluation_duration_ms</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
</span><span data-line="11"><span class="gp">... </span><span class="p">)</span>
</span><span data-line="12"><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">flag_key</span>
</span><span data-line="13"><span class="go">&#39;new_checkout&#39;</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></span>)</p></li>
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>)</p></li>
<li><p><strong>value</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></span>)</p></li>
<li><p><strong>reason</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="types.html#litestar_flags.types.EvaluationReason" title="litestar_flags.types.EvaluationReason"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvaluationReason</span></code></a></span>)</p></li>
<li><p><strong>variant</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>targeting_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>context_attributes</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span>)</p></li>
<li><p><strong>evaluation_duration_ms</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targeting_key=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_attributes=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluation_duration_ms=0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.__init__" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></span>)</p></li>
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>)</p></li>
<li><p><strong>value</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></span>)</p></li>
<li><p><strong>reason</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="types.html#litestar_flags.types.EvaluationReason" title="litestar_flags.types.EvaluationReason"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvaluationReason</span></code></a></span>)</p></li>
<li><p><strong>variant</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>targeting_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>context_attributes</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span>)</p></li>
<li><p><strong>evaluation_duration_ms</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">flag_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">reason</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="types.html#litestar_flags.types.EvaluationReason" title="litestar_flags.types.EvaluationReason"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvaluationReason</span></code></a></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">variant</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> <span class="pre">|</span> <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></em><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">targeting_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> <span class="pre">|</span> <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></em><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">context_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">evaluation_duration_ms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagEvaluationEvent.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/models.html#FlagEvaluationEvent.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.FlagEvaluationEvent.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Convert to dictionary representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary representation of the evaluation event.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="flagmetrics">
<h3>FlagMetrics<a class="headerlink" href="#flagmetrics" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">FlagMetrics</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#FlagMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Aggregated metrics for a feature flag.</p>
<p>Contains computed statistics about flag evaluations including
evaluation rate, unique users, distributions, and latency percentiles.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.evaluation_rate">
<span class="sig-name descname"><span class="pre">evaluation_rate</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.evaluation_rate" title="Link to this definition">¶</a></dt>
<dd><p>Evaluations per second in the measurement window.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.unique_users">
<span class="sig-name descname"><span class="pre">unique_users</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.unique_users" title="Link to this definition">¶</a></dt>
<dd><p>Count of unique targeting keys in the window.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.variant_distribution">
<span class="sig-name descname"><span class="pre">variant_distribution</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.variant_distribution" title="Link to this definition">¶</a></dt>
<dd><p>Count of evaluations per variant.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.reason_distribution">
<span class="sig-name descname"><span class="pre">reason_distribution</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.reason_distribution" title="Link to this definition">¶</a></dt>
<dd><p>Count of evaluations per reason.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.error_rate">
<span class="sig-name descname"><span class="pre">error_rate</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.error_rate" title="Link to this definition">¶</a></dt>
<dd><p>Percentage of evaluations that resulted in errors (0-100).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.latency_p50">
<span class="sig-name descname"><span class="pre">latency_p50</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.latency_p50" title="Link to this definition">¶</a></dt>
<dd><p>50th percentile latency in milliseconds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.latency_p90">
<span class="sig-name descname"><span class="pre">latency_p90</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.latency_p90" title="Link to this definition">¶</a></dt>
<dd><p>90th percentile latency in milliseconds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.latency_p99">
<span class="sig-name descname"><span class="pre">latency_p99</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.latency_p99" title="Link to this definition">¶</a></dt>
<dd><p>99th percentile latency in milliseconds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.total_evaluations">
<span class="sig-name descname"><span class="pre">total_evaluations</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.total_evaluations" title="Link to this definition">¶</a></dt>
<dd><p>Total number of evaluations in the window.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.window_start">
<span class="sig-name descname"><span class="pre">window_start</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.window_start" title="Link to this definition">¶</a></dt>
<dd><p>Start of the measurement window.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.window_end">
<span class="sig-name descname"><span class="pre">window_end</span></span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.window_end" title="Link to this definition">¶</a></dt>
<dd><p>End of the measurement window.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">FlagMetrics</span><span class="p">(</span>
</span><span data-line="2"><span class="gp">... </span>    <span class="n">evaluation_rate</span><span class="o">=</span><span class="mf">10.5</span><span class="p">,</span>
</span><span data-line="3"><span class="gp">... </span>    <span class="n">unique_users</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="n">variant_distribution</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;control&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s2">&quot;treatment&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">},</span>
</span><span data-line="5"><span class="gp">... </span>    <span class="n">reason_distribution</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;SPLIT&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">},</span>
</span><span data-line="6"><span class="gp">... </span>    <span class="n">error_rate</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span data-line="7"><span class="gp">... </span>    <span class="n">latency_p50</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
</span><span data-line="8"><span class="gp">... </span>    <span class="n">latency_p90</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
</span><span data-line="9"><span class="gp">... </span>    <span class="n">latency_p99</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
</span><span data-line="10"><span class="gp">... </span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluation_rate</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>unique_users</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>variant_distribution</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span>)</p></li>
<li><p><strong>reason_distribution</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span>)</p></li>
<li><p><strong>error_rate</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p50</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p90</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p99</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>total_evaluations</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>window_start</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>window_end</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">evaluation_rate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id9">
<span class="sig-name descname"><span class="pre">unique_users</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#id9" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">variant_distribution</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id11">
<span class="sig-name descname"><span class="pre">reason_distribution</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">error_rate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">latency_p50</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id14">
<span class="sig-name descname"><span class="pre">latency_p90</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id14" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id15">
<span class="sig-name descname"><span class="pre">latency_p99</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><a class="headerlink" href="#id15" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id16">
<span class="sig-name descname"><span class="pre">total_evaluations</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#id16" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id17">
<span class="sig-name descname"><span class="pre">window_start</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> <span class="pre">|</span> <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></em><a class="headerlink" href="#id17" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id18">
<span class="sig-name descname"><span class="pre">window_end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> <span class="pre">|</span> <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></em><a class="headerlink" href="#id18" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#FlagMetrics.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Convert metrics to dictionary representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary representation of the metrics.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.FlagMetrics.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evaluation_rate=0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_users=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant_distribution=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_distribution=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_rate=0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latency_p50=0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latency_p90=0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latency_p99=0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_evaluations=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_start=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_end=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#litestar_flags.analytics.FlagMetrics.__init__" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluation_rate</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>unique_users</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>variant_distribution</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span>)</p></li>
<li><p><strong>reason_distribution</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span>)</p></li>
<li><p><strong>error_rate</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p50</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p90</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>latency_p99</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>total_evaluations</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>window_start</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>window_end</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="analyticscollector-protocol">
<h3>AnalyticsCollector Protocol<a class="headerlink" href="#analyticscollector-protocol" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsCollector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">AnalyticsCollector</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/protocols.html#AnalyticsCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsCollector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Protocol" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></a></p>
<p>Protocol for analytics collectors.</p>
<p>All analytics collector implementations must implement this protocol.
Methods are async to support both sync and async backends.</p>
<dl class="simple">
<dt>Implementations:</dt><dd><ul class="simple">
<li><p>InMemoryAnalyticsCollector: In-memory storage for development/testing</p></li>
<li><p>(Future) DatadogAnalyticsCollector: Datadog integration</p></li>
<li><p>(Future) PrometheusAnalyticsCollector: Prometheus metrics</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyCollector</span><span class="p">:</span>
</span><span data-line="2"><span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">FlagEvaluationEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="3"><span class="gp">... </span>        <span class="c1"># Store or process the event</span>
</span><span data-line="4"><span class="gp">... </span>        <span class="k">pass</span>
</span><span data-line="5"><span class="gp">...</span>
</span><span data-line="6"><span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">flush</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="7"><span class="gp">... </span>        <span class="c1"># Flush any buffered events</span>
</span><span data-line="8"><span class="gp">... </span>        <span class="k">pass</span>
</span><span data-line="9"><span class="gp">...</span>
</span><span data-line="10"><span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="11"><span class="gp">... </span>        <span class="c1"># Clean up resources</span>
</span><span data-line="12"><span class="gp">... </span>        <span class="k">pass</span>
</span><span data-line="13"><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">MyCollector</span><span class="p">(),</span> <span class="n">AnalyticsCollector</span><span class="p">)</span>
</span><span data-line="14"><span class="go">True</span>
</span></pre></div>
</div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsCollector.record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/protocols.html#AnalyticsCollector.record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsCollector.record" title="Link to this definition">¶</a></dt>
<dd><p>Record a flag evaluation event.</p>
<p>This method should be fast and non-blocking. Implementations may
buffer events and flush them asynchronously to avoid impacting
flag evaluation latency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The evaluation event to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsCollector.flush">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/protocols.html#AnalyticsCollector.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsCollector.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush any buffered events.</p>
<p>Forces immediate processing of any buffered events. This is useful
for graceful shutdown or when events need to be persisted immediately.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsCollector.close">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/protocols.html#AnalyticsCollector.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsCollector.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the collector and release any resources.</p>
<p>This method should flush any remaining events and clean up
resources such as connections or background tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsCollector.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#litestar_flags.analytics.AnalyticsCollector.__init__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
</section>
<section id="collectors">
<h2>Collectors<a class="headerlink" href="#collectors" title="Link to this heading">¶</a></h2>
<section id="inmemoryanalyticscollector">
<h3>InMemoryAnalyticsCollector<a class="headerlink" href="#inmemoryanalyticscollector" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">InMemoryAnalyticsCollector</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>In-memory analytics collector for development and testing.</p>
<p>This collector stores evaluation events in memory with a configurable
maximum size. When the maximum size is reached, oldest events are
discarded to make room for new ones.</p>
<p>Thread-safe implementation using asyncio.Lock for concurrent access.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.max_size">
<span class="sig-name descname"><span class="pre">max_size</span></span><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.max_size" title="Link to this definition">¶</a></dt>
<dd><p>Maximum number of events to store.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">UTC</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.analytics</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlagEvaluationEvent</span><span class="p">,</span> <span class="n">InMemoryAnalyticsCollector</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvaluationReason</span>
</span><span data-line="4"><span class="gp">&gt;&gt;&gt; </span><span class="n">collector</span> <span class="o">=</span> <span class="n">InMemoryAnalyticsCollector</span><span class="p">(</span><span class="n">max_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</span><span data-line="5"><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">FlagEvaluationEvent</span><span class="p">(</span>
</span><span data-line="6"><span class="gp">... </span>    <span class="n">timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">),</span>
</span><span data-line="7"><span class="gp">... </span>    <span class="n">flag_key</span><span class="o">=</span><span class="s2">&quot;my_flag&quot;</span><span class="p">,</span>
</span><span data-line="8"><span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="9"><span class="gp">... </span>    <span class="n">reason</span><span class="o">=</span><span class="n">EvaluationReason</span><span class="o">.</span><span class="n">STATIC</span><span class="p">,</span>
</span><span data-line="10"><span class="gp">... </span><span class="p">)</span>
</span><span data-line="11"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">collector</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span data-line="12"><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="k">await</span> <span class="n">collector</span><span class="o">.</span><span class="n">get_events</span><span class="p">()</span>
</span><span data-line="13"><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
</span><span data-line="14"><span class="go">1</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the in-memory analytics collector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Maximum number of events to store. Defaults to 10000.
When exceeded, oldest events are discarded.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id19">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></em><a class="headerlink" href="#id19" title="Link to this definition">¶</a></dt>
<dd><p>Return the maximum number of events to store.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The configured maximum size.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.record" title="Link to this definition">¶</a></dt>
<dd><p>Record a flag evaluation event.</p>
<p>Thread-safe method that stores the event in memory. If the
maximum size is exceeded, the oldest event is removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The evaluation event to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.flush">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush buffered events.</p>
<p>For the in-memory collector, this is a no-op since events
are stored immediately. Provided for protocol compliance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.close">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the collector and clear all stored events.</p>
<p>Releases the stored events from memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.get_events">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.get_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.get_events" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve stored evaluation events.</p>
<p>This method is primarily intended for testing and debugging.
It allows filtering and limiting the returned events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – If provided, only return events for this flag key.</p></li>
<li><p><strong>limit</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – If provided, return at most this many events (most recent first).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of stored evaluation events matching the criteria.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.get_event_count">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_event_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.get_event_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.get_event_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the count of stored events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – If provided, only count events for this flag key.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of stored events matching the criteria.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.InMemoryAnalyticsCollector.clear">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/memory.html#InMemoryAnalyticsCollector.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.InMemoryAnalyticsCollector.clear" title="Link to this definition">¶</a></dt>
<dd><p>Clear all stored events.</p>
<p>Removes all events from memory without closing the collector.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="databaseanalyticscollector">
<h3>DatabaseAnalyticsCollector<a class="headerlink" href="#databaseanalyticscollector" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.collectors.database.</span></span><span class="sig-name descname"><span class="pre">DatabaseAnalyticsCollector</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Database analytics collector with batch writes.</p>
<p>Buffers evaluation events in memory and periodically flushes them to
the database in batches for optimal write performance. Uses SQLAlchemy
async sessions for non-blocking database operations.</p>
<dl class="simple">
<dt>Features:</dt><dd><ul class="simple">
<li><p>Configurable batch size and flush interval</p></li>
<li><p>Background task for periodic flushing</p></li>
<li><p>Thread-safe event buffering with asyncio.Lock</p></li>
<li><p>Automatic flush on close for data integrity</p></li>
<li><p>Proper cleanup of database connections</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.batch_size">
<span class="sig-name descname"><span class="pre">batch_size</span></span><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.batch_size" title="Link to this definition">¶</a></dt>
<dd><p>Maximum events to buffer before auto-flush.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush_interval_seconds">
<span class="sig-name descname"><span class="pre">flush_interval_seconds</span></span><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush_interval_seconds" title="Link to this definition">¶</a></dt>
<dd><p>Time between automatic flushes.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">collector</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DatabaseAnalyticsCollector</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span data-line="2"><span class="gp">... </span>    <span class="n">connection_string</span><span class="o">=</span><span class="s2">&quot;postgresql+asyncpg://user:pass@localhost/db&quot;</span><span class="p">,</span>
</span><span data-line="3"><span class="gp">... </span>    <span class="n">batch_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="n">flush_interval_seconds</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
</span><span data-line="5"><span class="gp">... </span><span class="p">)</span>
</span><span data-line="6"><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
</span><span data-line="7"><span class="gp">... </span>    <span class="k">await</span> <span class="n">collector</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span data-line="8"><span class="gp">... </span><span class="k">finally</span><span class="p">:</span>
</span><span data-line="9"><span class="gp">... </span>    <span class="k">await</span> <span class="n">collector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncEngine" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a></span>)</p></li>
<li><p><strong>session_maker</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.async_sessionmaker" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>[<a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncSession" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>]</span>)</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>flush_interval_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_maker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the database analytics collector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncEngine" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a></span>) – The SQLAlchemy async engine.</p></li>
<li><p><strong>session_maker</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.async_sessionmaker" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_sessionmaker</span></code></a>[<a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncSession" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>]</span>) – The session maker factory.</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Maximum events to buffer before auto-flush. Defaults to 100.</p></li>
<li><p><strong>flush_interval_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Seconds between automatic flushes. Defaults to 5.0.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.create">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_tables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">engine_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.create" title="Link to this definition">¶</a></dt>
<dd><p>Create a new database analytics collector.</p>
<p>Factory method that sets up the database connection and optionally
creates the analytics_events table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_string</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – Database connection string (SQLAlchemy format).</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Maximum events to buffer before auto-flush. Defaults to 100.</p></li>
<li><p><strong>flush_interval_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Seconds between automatic flushes. Defaults to 5.0.</p></li>
<li><p><strong>create_tables</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – Whether to create tables on startup. Defaults to True.</p></li>
<li><p><strong>**engine_kwargs</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></span>) – Additional arguments for create_async_engine.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector" title="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseAnalyticsCollector</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Configured DatabaseAnalyticsCollector instance with background flush task running.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">collector</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DatabaseAnalyticsCollector</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span data-line="2"><span class="gp">... </span>    <span class="n">connection_string</span><span class="o">=</span><span class="s2">&quot;sqlite+aiosqlite:///analytics.db&quot;</span><span class="p">,</span>
</span><span data-line="3"><span class="gp">... </span>    <span class="n">batch_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="n">flush_interval_seconds</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
</span><span data-line="5"><span class="gp">... </span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id20">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></em><a class="headerlink" href="#id20" title="Link to this definition">¶</a></dt>
<dd><p>Return the configured batch size.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The maximum number of events to buffer before auto-flush.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id21">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush_interval_seconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></em><a class="headerlink" href="#id21" title="Link to this definition">¶</a></dt>
<dd><p>Return the configured flush interval.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The time in seconds between automatic flushes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.record" title="Link to this definition">¶</a></dt>
<dd><p>Record a flag evaluation event.</p>
<p>Buffers the event in memory. If the buffer reaches batch_size,
automatically triggers a flush to the database.</p>
<p>Thread-safe method using asyncio.Lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The evaluation event to record.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.14)"><strong>RuntimeError</strong></a> – If the collector has been closed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush buffered events to the database.</p>
<p>Writes all buffered events to the database in a single transaction.
This method is thread-safe and can be called concurrently with record().</p>
<p>If there are no buffered events, this is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.close">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the collector and release resources.</p>
<p>Flushes any remaining buffered events, cancels the background
flush task, and disposes of the database engine connection pool.</p>
<p>This method is idempotent - calling it multiple times is safe.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.get_buffer_size">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_buffer_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.get_buffer_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.get_buffer_size" title="Link to this definition">¶</a></dt>
<dd><p>Get the current number of buffered events.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of events currently in the buffer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.health_check">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">health_check</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/collectors/database.html#DatabaseAnalyticsCollector.health_check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.collectors.database.DatabaseAnalyticsCollector.health_check" title="Link to this definition">¶</a></dt>
<dd><p>Check if the database connection is healthy.</p>
<p>Executes a simple query to verify connectivity.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the database is reachable, False otherwise.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="aggregator">
<h2>Aggregator<a class="headerlink" href="#aggregator" title="Link to this heading">¶</a></h2>
<section id="analyticsaggregator">
<h3>AnalyticsAggregator<a class="headerlink" href="#analyticsaggregator" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">AnalyticsAggregator</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Aggregator for computing metrics from feature flag evaluation events.</p>
<p>Supports multiple event sources including in-memory collectors and
database sessions. Provides methods for computing various metrics
including evaluation rates, unique users, distributions, and latencies.</p>
<p>The aggregator uses window-based aggregation, only considering events
within the specified time window for each metric calculation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.source">
<span class="sig-name descname"><span class="pre">source</span></span><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.source" title="Link to this definition">¶</a></dt>
<dd><p>The event source (InMemoryAnalyticsCollector or AsyncSession).</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.analytics</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryAnalyticsCollector</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">collector</span> <span class="o">=</span> <span class="n">InMemoryAnalyticsCollector</span><span class="p">()</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="n">aggregator</span> <span class="o">=</span> <span class="n">AnalyticsAggregator</span><span class="p">(</span><span class="n">collector</span><span class="p">)</span>
</span><span data-line="4"><span class="gp">&gt;&gt;&gt; </span><span class="n">rate</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_evaluation_rate</span><span class="p">(</span><span class="s2">&quot;my_flag&quot;</span><span class="p">,</span> <span class="n">window_seconds</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</span><span data-line="5"><span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_flag_metrics</span><span class="p">(</span><span class="s2">&quot;my_flag&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector" title="litestar_flags.analytics.collectors.memory.InMemoryAnalyticsCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">InMemoryAnalyticsCollector</span></code></a> | <a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncSession" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a></span>)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the analytics aggregator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.InMemoryAnalyticsCollector" title="litestar_flags.analytics.collectors.memory.InMemoryAnalyticsCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">InMemoryAnalyticsCollector</span></code></a> | <a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.AsyncSession" title="(in SQLAlchemy v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a></span>) – The event source to aggregate from. Can be an
InMemoryAnalyticsCollector for in-memory events or an
AsyncSession for database-backed events.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_evaluation_rate">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_evaluation_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_evaluation_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_evaluation_rate" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the evaluation rate for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 60).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Evaluations per second within the time window.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_unique_users">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_unique_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_unique_users"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_unique_users" title="Link to this definition">¶</a></dt>
<dd><p>Count unique targeting keys for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Count of unique targeting keys within the time window.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_variant_distribution">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_variant_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_variant_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_variant_distribution" title="Link to this definition">¶</a></dt>
<dd><p>Get the distribution of variants for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping variant names to evaluation counts.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_reason_distribution">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_reason_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_reason_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_reason_distribution" title="Link to this definition">¶</a></dt>
<dd><p>Get the distribution of evaluation reasons for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping reason strings to evaluation counts.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_error_rate">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_error_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_error_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_error_rate" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the error rate for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Percentage of evaluations that resulted in errors (0-100).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_latency_percentiles">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_latency_percentiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_latency_percentiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_latency_percentiles" title="Link to this definition">¶</a></dt>
<dd><p>Calculate latency percentiles for a flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>percentiles</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>] | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – List of percentiles to calculate (default: [50, 90, 99]).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary mapping percentile values to latencies in milliseconds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.AnalyticsAggregator.get_flag_metrics">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_flag_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/aggregator.html#AnalyticsAggregator.get_flag_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.AnalyticsAggregator.get_flag_metrics" title="Link to this definition">¶</a></dt>
<dd><p>Get all aggregated metrics for a flag.</p>
<p>This is a convenience method that computes all available metrics
in a single call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The key of the flag to measure.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – The time window in seconds (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagMetrics" title="litestar_flags.analytics.aggregator.FlagMetrics"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagMetrics</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>FlagMetrics object containing all computed metrics.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="exporters">
<h2>Exporters<a class="headerlink" href="#exporters" title="Link to this heading">¶</a></h2>
<section id="prometheusexporter">
<h3>PrometheusExporter<a class="headerlink" href="#prometheusexporter" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">PrometheusExporter</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Prometheus metrics exporter for feature flag evaluations.</p>
<p>Exposes feature flag metrics in Prometheus format for monitoring
and alerting. This exporter implements the AnalyticsCollector protocol,
allowing it to receive evaluation events directly.</p>
<dl class="simple">
<dt>Metrics exported:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>feature_flag_evaluations_total: Counter of flag evaluations</dt><dd><p>Labels: flag_key, reason, variant</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>feature_flag_evaluation_duration_seconds: Histogram of evaluation times</dt><dd><p>Labels: flag_key</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>feature_flag_unique_users: Gauge of unique users per flag</dt><dd><p>Labels: flag_key</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>feature_flag_error_rate: Gauge of error rate per flag</dt><dd><p>Labels: flag_key</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.registry">
<span class="sig-name descname"><span class="pre">registry</span></span><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.registry" title="Link to this definition">¶</a></dt>
<dd><p>The Prometheus registry to use for metrics.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.prefix">
<span class="sig-name descname"><span class="pre">prefix</span></span><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.prefix" title="Link to this definition">¶</a></dt>
<dd><p>Optional prefix for metric names.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">exporter</span> <span class="o">=</span> <span class="n">PrometheusExporter</span><span class="p">()</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">exporter</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">evaluation_event</span><span class="p">)</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Metrics are automatically updated</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registry</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectorRegistry</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>prefix</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>)</p></li>
<li><p><strong>duration_buckets</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#Ellipsis" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code></a>]</span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration_buckets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.0001,</span> <span class="pre">0.0005,</span> <span class="pre">0.001,</span> <span class="pre">0.005,</span> <span class="pre">0.01,</span> <span class="pre">0.025,</span> <span class="pre">0.05,</span> <span class="pre">0.1,</span> <span class="pre">0.25,</span> <span class="pre">0.5,</span> <span class="pre">1.0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the Prometheus exporter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registry</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectorRegistry</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – Custom Prometheus registry. If not provided, uses the default
global registry.</p></li>
<li><p><strong>prefix</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – Optional prefix for metric names (e.g., “myapp” -&gt; “myapp_feature_flag_*”).</p></li>
<li><p><strong>duration_buckets</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#Ellipsis" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code></a>]</span>) – Custom histogram buckets for duration measurements in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.14)"><strong>ImportError</strong></a> – If prometheus_client is not installed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id22">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">registry</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">CollectorRegistry</span></em><a class="headerlink" href="#id22" title="Link to this definition">¶</a></dt>
<dd><p>Get the Prometheus registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Prometheus registry used by this exporter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.evaluations_counter">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">evaluations_counter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Counter</span></em><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.evaluations_counter" title="Link to this definition">¶</a></dt>
<dd><p>Get the evaluations counter metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Counter metric for flag evaluations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.duration_histogram">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">duration_histogram</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Histogram</span></em><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.duration_histogram" title="Link to this definition">¶</a></dt>
<dd><p>Get the duration histogram metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Histogram metric for evaluation durations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.unique_users_gauge">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unique_users_gauge</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Gauge</span></em><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.unique_users_gauge" title="Link to this definition">¶</a></dt>
<dd><p>Get the unique users gauge metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Gauge metric for unique users.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.error_rate_gauge">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">error_rate_gauge</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Gauge</span></em><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.error_rate_gauge" title="Link to this definition">¶</a></dt>
<dd><p>Get the error rate gauge metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Gauge metric for error rates.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.record" title="Link to this definition">¶</a></dt>
<dd><p>Record a single analytics event.</p>
<p>Updates all Prometheus metrics based on the evaluation event.
This method implements the AnalyticsCollector protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The analytics event to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.record_batch">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.record_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.record_batch" title="Link to this definition">¶</a></dt>
<dd><p>Record multiple analytics events in a batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>events</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a>]</span>) – List of analytics events to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.flush">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush any buffered data.</p>
<p>For Prometheus, metrics are updated immediately, so this is a no-op.
Provided for AnalyticsCollector protocol compliance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.close">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the exporter and clean up resources.</p>
<p>Clears internal tracking state but does not unregister metrics
from the Prometheus registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.update_from_metrics">
<span class="sig-name descname"><span class="pre">update_from_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.update_from_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.update_from_metrics" title="Link to this definition">¶</a></dt>
<dd><p>Update gauge metrics from a metrics object or dictionary.</p>
<p>This method syncs Prometheus gauges with pre-aggregated statistics
from a FlagMetrics object or a compatible dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The flag key to update metrics for.</p></li>
<li><p><strong>metrics</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetricsProvider</span></code> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span>) – A MetricsProvider (like FlagMetrics) or a dictionary with
keys: unique_users, error_rate (0-100), total_evaluations.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.analytics.aggregator</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnalyticsAggregator</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">aggregator</span> <span class="o">=</span> <span class="n">AnalyticsAggregator</span><span class="p">(</span><span class="n">collector</span><span class="p">)</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_flag_metrics</span><span class="p">(</span><span class="s2">&quot;feature_a&quot;</span><span class="p">)</span>
</span><span data-line="4"><span class="gp">&gt;&gt;&gt; </span><span class="n">exporter</span><span class="o">.</span><span class="n">update_from_metrics</span><span class="p">(</span><span class="s2">&quot;feature_a&quot;</span><span class="p">,</span> <span class="n">metrics</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.update_from_aggregator">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update_from_aggregator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aggregator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.update_from_aggregator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.update_from_aggregator" title="Link to this definition">¶</a></dt>
<dd><p>Update gauge metrics from an analytics aggregator.</p>
<p>This method is useful for syncing Prometheus gauges with
pre-aggregated statistics from an AnalyticsAggregator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aggregator</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></span>) – An AnalyticsAggregator instance with get_flag_metrics
or get_flag_metrics_async method.</p></li>
<li><p><strong>flag_keys</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</span>) – List of flag keys to update metrics for.</p></li>
<li><p><strong>window_seconds</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Time window for metric aggregation (default: 3600).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.analytics.aggregator</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnalyticsAggregator</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">aggregator</span> <span class="o">=</span> <span class="n">AnalyticsAggregator</span><span class="p">(</span><span class="n">collector</span><span class="p">)</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">exporter</span><span class="o">.</span><span class="n">update_from_aggregator</span><span class="p">(</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="n">aggregator</span><span class="o">=</span><span class="n">aggregator</span><span class="p">,</span>
</span><span data-line="5"><span class="gp">... </span>    <span class="n">flag_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;feature_a&quot;</span><span class="p">,</span> <span class="s2">&quot;feature_b&quot;</span><span class="p">],</span>
</span><span data-line="6"><span class="gp">... </span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.get_tracked_flag_keys">
<span class="sig-name descname"><span class="pre">get_tracked_flag_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.get_tracked_flag_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.get_tracked_flag_keys" title="Link to this definition">¶</a></dt>
<dd><p>Get list of flag keys that have been tracked.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of flag keys that have recorded evaluations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.reset_flag_stats">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reset_flag_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag_key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.reset_flag_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.reset_flag_stats" title="Link to this definition">¶</a></dt>
<dd><p>Reset internal tracking stats for a specific flag.</p>
<p>This clears the unique users set and error tracking for the flag.
Note: This does not reset Prometheus metrics themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flag_key</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – The flag key to reset stats for.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.PrometheusExporter.reset_all_stats">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reset_all_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/prometheus.html#PrometheusExporter.reset_all_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.PrometheusExporter.reset_all_stats" title="Link to this definition">¶</a></dt>
<dd><p>Reset all internal tracking stats.</p>
<p>Clears all unique user sets and error tracking.
Note: This does not reset Prometheus metrics themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="otelanalyticsexporter">
<h3>OTelAnalyticsExporter<a class="headerlink" href="#otelanalyticsexporter" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.exporters.otel.</span></span><span class="sig-name descname"><span class="pre">OTelAnalyticsExporter</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>OpenTelemetry exporter for feature flag analytics.</p>
<p>Exports feature flag evaluation events as OpenTelemetry spans and metrics.
Implements the AnalyticsCollector protocol for seamless integration with
the analytics pipeline.</p>
<p>This exporter can optionally wrap an existing OTelHook instance to share
tracer and meter configurations, or create its own OpenTelemetry instruments.</p>
<dl class="simple">
<dt>Metrics exported:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>feature_flag.analytics.events_recorded: Counter of recorded analytics events</dt><dd><p>Labels: flag_key, reason</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>feature_flag.analytics.batch_size: Histogram of batch sizes when flushing</dt><dd><p>Labels: (none)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.tracer">
<span class="sig-name descname"><span class="pre">tracer</span></span><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.tracer" title="Link to this definition">¶</a></dt>
<dd><p>The OpenTelemetry tracer for creating spans.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.meter">
<span class="sig-name descname"><span class="pre">meter</span></span><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.meter" title="Link to this definition">¶</a></dt>
<dd><p>The OpenTelemetry meter for recording metrics.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size">
<span class="sig-name descname"><span class="pre">batch_size</span></span><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size" title="Link to this definition">¶</a></dt>
<dd><p>Maximum number of events to buffer before auto-flush.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush_interval">
<span class="sig-name descname"><span class="pre">flush_interval</span></span><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush_interval" title="Link to this definition">¶</a></dt>
<dd><p>Time in seconds between automatic flushes.</p>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">exporter</span> <span class="o">=</span> <span class="n">OTelAnalyticsExporter</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">exporter</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">evaluation_event</span><span class="p">)</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Events are batched and flushed automatically</span>
</span><span data-line="4"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">exporter</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracer</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tracer</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>meter</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Meter</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>otel_hook</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">OTelHook</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>)</p></li>
<li><p><strong>tracer_name</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>)</p></li>
<li><p><strong>meter_name</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>)</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>flush_interval</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>)</p></li>
<li><p><strong>record_values</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>)</p></li>
<li><p><strong>create_spans</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">otel_hook</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracer_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'litestar_flags.analytics'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meter_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'litestar_flags.analytics'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_spans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the OpenTelemetry analytics exporter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracer</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tracer</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – Custom tracer instance. If not provided, uses otel_hook’s tracer
or creates one using tracer_name.</p></li>
<li><p><strong>meter</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Meter</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – Custom meter instance. If not provided, uses otel_hook’s meter
or creates one using meter_name.</p></li>
<li><p><strong>otel_hook</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">OTelHook</span></code> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span>) – Existing OTelHook instance to share tracer/meter from.
If provided, tracer and meter arguments are ignored.</p></li>
<li><p><strong>tracer_name</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – Name for the default tracer if none provided.</p></li>
<li><p><strong>meter_name</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – Name for the default meter if none provided.</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Maximum number of events to buffer before auto-flush.
Set to 0 to disable batching.</p></li>
<li><p><strong>flush_interval</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Time in seconds between automatic flushes.
Set to 0 to disable automatic flushing.</p></li>
<li><p><strong>record_values</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – Whether to record flag values in spans. Disabled by default
for privacy/security reasons.</p></li>
<li><p><strong>create_spans</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – Whether to create spans for each event. Set to False to
only record metrics without span overhead.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.14)"><strong>ImportError</strong></a> – If opentelemetry-api is not installed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id23">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tracer</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tracer</span></em><a class="headerlink" href="#id23" title="Link to this definition">¶</a></dt>
<dd><p>Get the tracer instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The OpenTelemetry tracer used by this exporter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id24">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">meter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Meter</span></em><a class="headerlink" href="#id24" title="Link to this definition">¶</a></dt>
<dd><p>Get the meter instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The OpenTelemetry meter used by this exporter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.events_recorded_counter">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">events_recorded_counter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Counter</span></em><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.events_recorded_counter" title="Link to this definition">¶</a></dt>
<dd><p>Get the events recorded counter metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Counter metric for recorded analytics events.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size_histogram">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_size_histogram</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Histogram</span></em><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.batch_size_histogram" title="Link to this definition">¶</a></dt>
<dd><p>Get the batch size histogram metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Histogram metric for batch sizes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.buffer_size">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">buffer_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></em><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.buffer_size" title="Link to this definition">¶</a></dt>
<dd><p>Get the current number of buffered events.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Number of events currently in the buffer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record" title="Link to this definition">¶</a></dt>
<dd><p>Record a flag evaluation event.</p>
<p>Buffers the event and flushes when batch_size is reached.
This method implements the AnalyticsCollector protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The evaluation event to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush any buffered events.</p>
<p>Forces immediate processing of all buffered events, creating spans
and recording metrics for each event.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.close">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the exporter and release resources.</p>
<p>Flushes remaining events and cancels the background flush task.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_sync">
<span class="sig-name descname"><span class="pre">record_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.record_sync"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_sync" title="Link to this definition">¶</a></dt>
<dd><p>Record an event synchronously without batching.</p>
<p>This method processes the event immediately without buffering.
Useful for low-volume scenarios or when immediate recording is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a></span>) – The evaluation event to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_batch">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#OTelAnalyticsExporter.record_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter.record_batch" title="Link to this definition">¶</a></dt>
<dd><p>Record multiple events in a batch.</p>
<p>Adds all events to the buffer and triggers a flush.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>events</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference internal" href="#litestar_flags.analytics.FlagEvaluationEvent" title="litestar_flags.analytics.models.FlagEvaluationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagEvaluationEvent</span></code></a>]</span>) – List of evaluation events to record.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="helper-functions">
<h3>Helper Functions<a class="headerlink" href="#helper-functions" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.create_exporter_from_hook">
<span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.exporters.otel.</span></span><span class="sig-name descname"><span class="pre">create_exporter_from_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">otel_hook</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_spans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/litestar_flags/analytics/exporters/otel.html#create_exporter_from_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.create_exporter_from_hook" title="Link to this definition">¶</a></dt>
<dd><p>Create an OTelAnalyticsExporter from an existing OTelHook.</p>
<p>This factory function creates an analytics exporter that shares the
tracer and meter from an existing OTelHook instance, ensuring consistent
instrumentation across flag evaluation and analytics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>otel_hook</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">OTelHook</span></code></span>) – The OTelHook instance to share tracer/meter from.</p></li>
<li><p><strong>batch_size</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>) – Maximum number of events to buffer before auto-flush.</p></li>
<li><p><strong>flush_interval</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Time in seconds between automatic flushes.</p></li>
<li><p><strong>record_values</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – Whether to record flag values in spans.</p></li>
<li><p><strong>create_spans</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – Whether to create spans for each event.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter" title="litestar_flags.analytics.exporters.otel.OTelAnalyticsExporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">OTelAnalyticsExporter</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A configured OTelAnalyticsExporter instance.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.14)"><strong>ImportError</strong></a> – If opentelemetry-api is not installed.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_flags.contrib.otel</span><span class="w"> </span><span class="kn">import</span> <span class="n">OTelHook</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">hook</span> <span class="o">=</span> <span class="n">OTelHook</span><span class="p">()</span>
</span><span data-line="3"><span class="gp">&gt;&gt;&gt; </span><span class="n">exporter</span> <span class="o">=</span> <span class="n">create_exporter_from_hook</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span><span data-line="4"><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">exporter</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</dd></dl>

</section>
</section>
<section id="database-models">
<h2>Database Models<a class="headerlink" href="#database-models" title="Link to this heading">¶</a></h2>
<section id="analyticseventmodel">
<h3>AnalyticsEventModel<a class="headerlink" href="#analyticseventmodel" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.models.</span></span><span class="sig-name descname"><span class="pre">AnalyticsEventModel</span></span><a class="reference internal" href="../_modules/litestar_flags/analytics/models.html#AnalyticsEventModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">UUIDv7AuditBase</span></code></p>
<p>SQLAlchemy model for analytics events.</p>
<p>Stores feature flag evaluation events for analysis and reporting.
Designed for high-volume writes with appropriate indexes for common queries.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.timestamp" title="Link to this definition">¶</a></dt>
<dd><p>When the evaluation occurred.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.flag_key">
<span class="sig-name descname"><span class="pre">flag_key</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.flag_key" title="Link to this definition">¶</a></dt>
<dd><p>The key of the evaluated flag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.value" title="Link to this definition">¶</a></dt>
<dd><p>The evaluated value stored as JSON.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.reason">
<span class="sig-name descname"><span class="pre">reason</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.reason" title="Link to this definition">¶</a></dt>
<dd><p>Why this value was returned.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.variant">
<span class="sig-name descname"><span class="pre">variant</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.variant" title="Link to this definition">¶</a></dt>
<dd><p>The variant key if applicable.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.targeting_key">
<span class="sig-name descname"><span class="pre">targeting_key</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.targeting_key" title="Link to this definition">¶</a></dt>
<dd><p>The key used for targeting (e.g., user ID).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.context_attributes">
<span class="sig-name descname"><span class="pre">context_attributes</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.context_attributes" title="Link to this definition">¶</a></dt>
<dd><p>Additional context attributes as JSON.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.evaluation_duration_ms">
<span class="sig-name descname"><span class="pre">evaluation_duration_ms</span></span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.evaluation_duration_ms" title="Link to this definition">¶</a></dt>
<dd><p>Evaluation time in milliseconds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id25">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[datetime]</span></em><a class="headerlink" href="#id25" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id26">
<span class="sig-name descname"><span class="pre">flag_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[str]</span></em><a class="headerlink" href="#id26" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id27">
<span class="sig-name descname"><span class="pre">reason</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[str]</span></em><a class="headerlink" href="#id27" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">UUID</span></em><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.id" title="Link to this definition">¶</a></dt>
<dd><p>UUID Primary key column.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id28">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[dict[str,</span> <span class="pre">Any]</span> <span class="pre">|</span> <span class="pre">None]</span></em><a class="headerlink" href="#id28" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id29">
<span class="sig-name descname"><span class="pre">variant</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[str</span> <span class="pre">|</span> <span class="pre">None]</span></em><a class="headerlink" href="#id29" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id30">
<span class="sig-name descname"><span class="pre">targeting_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[str</span> <span class="pre">|</span> <span class="pre">None]</span></em><a class="headerlink" href="#id30" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id31">
<span class="sig-name descname"><span class="pre">context_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[dict[str,</span> <span class="pre">Any]]</span></em><a class="headerlink" href="#id31" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id32">
<span class="sig-name descname"><span class="pre">evaluation_duration_ms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapped[float</span> <span class="pre">|</span> <span class="pre">None]</span></em><a class="headerlink" href="#id32" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span> <span class="pre">|</span> <span class="pre">None</span></em><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.created_at" title="Link to this definition">¶</a></dt>
<dd><p>Date/time of instance creation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.updated_at">
<span class="sig-name descname"><span class="pre">updated_at</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span> <span class="pre">|</span> <span class="pre">None</span></em><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.updated_at" title="Link to this definition">¶</a></dt>
<dd><p>Date/time of instance last update.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="litestar_flags.analytics.models.AnalyticsEventModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#litestar_flags.analytics.models.AnalyticsEventModel.__init__" title="Link to this definition">¶</a></dt>
<dd><p>A simple constructor that allows initialization from kwargs.</p>
<p>Sets attributes on the constructed instance using the names and
values in <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>.</p>
<p>Only keys that are present as
attributes of the instance’s class are allowed. These could be,
for example, any mapped columns or relationships.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Link to this heading">¶</a></h2>
<section id="availability-flags">
<h3>Availability Flags<a class="headerlink" href="#availability-flags" title="Link to this heading">¶</a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="litestar_flags.analytics.PROMETHEUS_AVAILABLE">
<span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.</span></span><span class="sig-name descname"><span class="pre">PROMETHEUS_AVAILABLE</span></span><a class="headerlink" href="#litestar_flags.analytics.PROMETHEUS_AVAILABLE" title="Link to this definition">¶</a></dt>
<dd><p>Boolean indicating if <code class="docutils literal notranslate"><span class="pre">prometheus_client</span></code> is installed and available.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="litestar_flags.analytics.exporters.otel.OTEL_AVAILABLE">
<span class="sig-prename descclassname"><span class="pre">litestar_flags.analytics.exporters.otel.</span></span><span class="sig-name descname"><span class="pre">OTEL_AVAILABLE</span></span><a class="headerlink" href="#litestar_flags.analytics.exporters.otel.OTEL_AVAILABLE" title="Link to this definition">¶</a></dt>
<dd><p>Boolean indicating if <code class="docutils literal notranslate"><span class="pre">opentelemetry-api</span></code> is installed and available.</p>
</dd></dl>

</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../user-guide/analytics.html"><span class="doc">Flag Analytics</span></a> - User guide with examples</p></li>
<li><p><a class="reference internal" href="types.html"><span class="doc">Types and Enums</span></a> - <code class="docutils literal notranslate"><span class="pre">EvaluationReason</span></code> enum and other types</p></li>
<li><p><a class="reference internal" href="models.html"><span class="doc">Models</span></a> - Flag and rule models</p></li>
</ul>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="exceptions.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Exceptions</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="../user-guide/index.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">User Guide</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2026, Jacob Coffee</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://github.com/JacobCoffee/litestar-flags" aria-label="GitHub">
  <iconify-icon icon="simple-icons:github"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=01f34227"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=30646c52"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../_static/shibuya.js?v=cac61aee"></script></body>
</html>